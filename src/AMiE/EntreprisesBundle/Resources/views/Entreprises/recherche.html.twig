{% extends "AMiEHomeBundle::layout.html.twig" %}

{% block title "Entreprises" %}

{% block head "Recherche Entreprises" %}

{% block content %}
    <div class="card">
        <div class="card-body m-t-0">
            <table class="table table-inner table-vmiddle">
                <thead>
                <tr>
                    <th><h4><strong>Nom</strong></h4></th>
                    <th><h4><strong>Siret</strong></h4></th>
                    <th><h4><strong>Mail</strong></h4></th>
                    <th><h4><strong>Ville</strong></h4></th>
                    <th><h4><strong>Secteur d'activité</strong></h4></th>
                    <th><h4></h4></th>
                </tr>
                </thead>
                <tbody>
                {% for entreprise in entreprises %}
                    <tr>
                        <td>{{ entreprise.nom }}</td>
                        <td>{{ entreprise.siret }}</td>
                        <td>{{ entreprise.email }}</td>
                        <td>{{ entreprise.ville }}</td>
                        <td>{{ entreprise.secteur }}</td>

                        <td>
                            <ul class="actions">
                                <li>
                                    <a href="{{ path('amie_entreprises_fiche', { 'id': entreprise.id, 'slug': entreprise.nom|slugify}) }}"
                                       title="Afficher cette entreprise" onclick="">
                                        <i class="glyphicon glyphicon-upload"></i>
                                    </a>
                                </li>
                                {% if is_granted('ROLE_SUPER_ADMIN') %}
                                    <li>
                                        <a href="{{ path('amie_entreprises_supprimerentreprise', { 'id': entreprise.id}) }}"
                                           title="Supprimer cette entreprise"
                                           onclick="if(confirm('Attention action irréversible ! Confirmer la suppression ?')) return true; else return false;">
                                            <i class="glyphicon glyphicon-trash"></i>
                                        </a>
                                    </li>
                                {%  endif %}
                            </ul>

                        </td>
                    </tr>
                {% else %}
                    <tr>
                        <td colspan="6">Aucun résultat.</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <div class="card">
        <div class="card-header bgm-orange">
            <h2><i class="glyphicon glyphicon-search" style="display: inline"></i> Recherche avancée</h2>
        </div>
        <form action="{{ path('amie_entreprises_recherche') }}" method="POST">
            <div class="card-body card-padding">
                <div class="col-sm-4">
                    <div class="form-group">
                        <div class="fg-line">
                            {{ form_label(formRech.nom, 'Rechercher par nom', { 'attr': {'class': 'c-black f-500 m-b-20'} }) }}
                            {{ form_widget(formRech.nom, { 'attr': {'class': 'form-control', 'placeholder': 'Nom'} }) }}
                        </div>
                    </div>
                </div>
                <div class="col-sm-4">
                    <div class="form-group">
                        <div class="fg-line">
                            {{ form_label(formRech.siret, 'Rechercher par numéro siret', { 'attr': {'class': 'c-black f-500 m-b-20'} }) }}
                            {{ form_widget(formRech.siret, { 'attr': {'class': 'form-control', 'placeholder': 'Siret'} }) }}
                        </div>
                    </div>
                </div>
                <div class="col-sm-4">
                    <div class="form-group">
                        <div class="fg-line">
                            {{ form_label(formRech.ville, 'Rechercher par ville', { 'attr': {'class': 'c-black f-500 m-b-20'} }) }}
                            {{ form_widget(formRech.ville, { 'attr': {'class': 'form-control', 'placeholder' : 'Ville'} }) }}
                        </div>
                    </div>
                </div>
                    <div class="form-group">
                        <div class="fg-line">
                            {{ form_label(formRech.secteur, 'Rechercher par secteur', { 'attr': {'class': 'c-black f-500 m-b-20'} }) }}
                            {{ form_widget(formRech.secteur, { 'attr': {'class': 'form-control'} }) }}
                        </div>
                    </div>
                </div>
            <div class="row">
                <div class="col-sm-offset-9 col-sm-4">
					<button type="submit" name="submitAction" value="rechercher"
                      class="btn btn-primary btn-file m-r-10 waves-effect waves-button waves-float">
                        Rechercher
                    </button>
					<button type="submit" name="submitAction" value="exporter"
                       class="btn btn-primary btn-file m-r-10 waves-effect waves-button waves-float">
                         Exporter
                   </button>
                </div>
            </div>
        </form>
        <br/>
    </div>
{% endblock %}

